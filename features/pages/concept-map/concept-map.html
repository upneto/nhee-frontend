<div class="container-fluid mt-4">
    <div class="page-header">
        <h1>Mapa Conceitual</h1>
        <p class="lead">Visualize as conex√µes entre textos, conceitos, d√∫vidas e respostas</p>
    </div>

    <div class="section-divider"></div>

    <!-- Controles de Filtro -->
    <div class="controls-panel mb-4">
        <div class="row">
            <div class="col-md-4">
                <label class="control-label">Filtrar por Tipo</label>
                <select class="form-control form-control-sm" id="filterType">
                    <option value="all">Todos</option>
                    <option value="texts">Apenas Textos</option>
                    <option value="concepts">Apenas Conceitos</option>
                    <option value="questions">Apenas D√∫vidas</option>
                    <option value="answers">Apenas Respostas</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="control-label">Filtrar por Conceito</label>
                <select class="form-control form-control-sm" id="filterConcept">
                    <option value="all">Todos os Conceitos</option>
                    <option value="tempo">Tempo</option>
                    <option value="consciencia">Consci√™ncia</option>
                    <option value="metafisica">Metaf√≠sica</option>
                    <option value="conhecimento">Conhecimento</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="control-label">Visualiza√ß√£o</label>
                <select class="form-control form-control-sm" id="layoutType">
                    <option value="hierarchical">Hier√°rquica</option>
                    <option value="radial">Radial</option>
                    <option value="force">For√ßa</option>
                </select>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <label class="control-label">A√ß√µes</label>
                <div class="btn-group">
                    <button class="btn btn-sm btn-outline-primary" onclick="zoomIn()">+ Zoom</button>
                    <button class="btn btn-sm btn-outline-primary" onclick="zoomOut()">- Zoom</button>
                    <button class="btn btn-sm btn-outline-danger" onclick="resetView()">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Legenda -->
    <div class="legend-panel mb-4">
        <div class="legend-title">Legenda:</div>
        <div class="legend-items">
            <div class="legend-item">
                <div class="legend-node node-text"></div>
                <span>Texto</span>
            </div>
            <div class="legend-item">
                <div class="legend-node node-concept"></div>
                <span>Conceito</span>
            </div>
            <div class="legend-item">
                <div class="legend-node node-question"></div>
                <span>D√∫vida</span>
            </div>
            <div class="legend-item">
                <div class="legend-node node-answer"></div>
                <span>Resposta</span>
            </div>
            <div class="legend-item">
                <div class="legend-edge"></div>
                <span>Relacionamento</span>
            </div>
        </div>
    </div>

    <!-- √Årea do Grafo -->
    <div class="graph-container" id="graphContainer">
        <svg id="graphSvg" width="100%" height="700">
            <!-- Defini√ß√µes para setas -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#d4af37" />
                </marker>
            </defs>
            
            <!-- Grupo para zoom e pan -->
            <g id="graphGroup">
                <!-- Conex√µes (arestas) -->
                <g id="edgesGroup"></g>
                
                <!-- N√≥s -->
                <g id="nodesGroup"></g>
            </g>
        </svg>
    </div>

    <!-- Painel de Detalhes (lateral) -->
    <div class="details-panel" id="detailsPanel">
        <div class="details-header">
            <h4 id="detailsTitle">Selecione um elemento</h4>
            <button class="btn-close-details" onclick="closeDetails()">‚úï</button>
        </div>
        <div class="details-content" id="detailsContent">
            <p class="text-muted">Clique em um n√≥ do grafo para ver seus detalhes e relacionamentos.</p>
        </div>
    </div>

    <!-- Estat√≠sticas -->
    <div class="stats-panel mt-4">
        <div class="row text-center">
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="statTexts">12</div>
                    <div class="stat-label">Textos</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="statConcepts">28</div>
                    <div class="stat-label">Conceitos</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="statQuestions">45</div>
                    <div class="stat-label">D√∫vidas</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="statConnections">87</div>
                    <div class="stat-label">Conex√µes</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Box -->
    <div class="info-box mt-4">
        <h5>üìä Sobre o Mapa Conceitual</h5>
        <p>Este mapa visual representa a rede de conhecimento da plataforma. Cada n√≥ representa um elemento (texto, conceito, d√∫vida ou resposta) e as linhas mostram como eles se relacionam. Use os filtros acima para focar em aspectos espec√≠ficos do conhecimento.</p>
        <ul>
            <li><strong>Textos</strong> abordam <strong>Conceitos</strong></li>
            <li><strong>Conceitos</strong> geram <strong>D√∫vidas</strong></li>
            <li><strong>D√∫vidas</strong> s√£o respondidas por <strong>Respostas</strong></li>
            <li><strong>Respostas</strong> podem criar novos <strong>Conceitos</strong></li>
        </ul>
    </div>
</div>
